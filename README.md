# -fintech-
需求分析：
财经新闻作为重要却海量的投资数据，无时无刻不在影响着投资者们的投资决策，为了更好地提示客户当下新闻事件对应的投资机会和投资风险，本课以研发“历史事件连连看”为目的，旨在根据当前新闻内容从历史事件中搜索出相似新闻报道，后期可以结合事件与行情，辅助客户采取相应投资策略。
 该赛题是让参赛者为每一条测试集数据寻找其最相似的TOP 20条新闻（不包含测试新闻本身），我们会根据参赛者提交的结果和实际的数据进行对比，采用mAP值作为评价指标。 
* bm25new_param.py  
使用bm25算法进行文本相似度分析,为了提高相似度计算精确度，除了对训练测试集数据进行分词和停用词操作以外，还对训练集数据额外进行了重复语句的去重操作，结果证明这样的一列数据处理过程，提升了bm25算法的理论上限；
* bm25new.py  
针对bm25算法的实现代码，使用了IDF原理判断一个词与一个文档的相关性的权重，
![](https://github.com/jaygle17/-fintech-/blob/master/bm25.png)

第一个组成部分是查询词在文档 D 中的权值，其中 fi代表了单词在文档 D 中的词频，k1和 K 是经验参数。第二个组成部分是查询词自身的权值，其中 qfi代表查询词在用户查询中的词频，如果查询较短小的话，这个值往往是 1，k2是经验参数在第二个计算因子中，K 因子代表了对文档长度的考虑，它用来利用文档长度归一化 tf 因子。 公式2所示 K 的计算公式中 ，dl 代 表 文 档 D 的 长 度 ， 而 avdl 则 代 表 文 档 集 合 中所有文档的平均长度，k1和 b 是经验参数。 其中参数 b 是调节因子，极端情况下，将 b 设定为 0，则文档长度因素将不起作用，经验表明一般将 b 设定为 0．75 会获得较好的搜索效果。 

BM25 公式中包含 3 个自由调节参数 ，除了调节因子 b 外 ，还有针对词频的调节因子 k1和 k2。 k1的作用是对查询词在文档中的词频进行调节，如果将 k1设定为 0，则第二部分计算因子成了整数 1，即不考虑词频的因素，退化成了二元独立模型。 如果将 k1设定为较大值， 则第二部分计算因子基本和词频 fi保持线性增长，即放大了词频的权值，根据经验，一般将 k1设定为 1.2。调节因子 k2和 k1的作用类似，不同点在于其是针对查询词中的词频进行调节，一般将这个值设定在 0 到 1000 较大的范围内。之所以如此，是因为查询往往很短，所以不同查询词的词频都很小，词频之间差异不大，较大的调节参数数值设定范围允许对这种差异进行放大。

BM25算法通过加入文档权值和查询权值，拓展了二元独立模型的得分函数。这种拓展是基于概率论和实验验证的，并不是一个正式的模型。BM25模型在二元独立模型的基础上，考虑了单词在查询中的权值以及单词在文档中的权值，拟合综合上述考虑的公式，并通过实验引入经验参数。一句话概况其主要思想：对Query进行语素解析，生成语素qi；然后，对于每个搜索结果D，计算每个语素qi与D的相关性得分，最后，将qi相对于D的相关性得分进行加权求和，从而得到Query与D的相关性得分。
[参考链接](https://blog.csdn.net/Jaygle/article/details/80927732)
